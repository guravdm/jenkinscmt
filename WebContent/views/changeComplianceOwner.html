
<div>
		<div class="modal fade" id="assignSuccess" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header" style="background-color: #13a430;">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">
							<i class="fa fa-exclamation-triangle"></i> &nbsp;Success
						</h4>
					</div>
					<div class="modal-body">
						<p>All task assigned successfully..!!</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>

			</div>
		</div>
<div class="page_cont_padd">
	<div class="page_container">
		<!--heading text-->

		<div class="col-md-12">
			<div class="header_button">
				<!--<button type="button" class="btn btn-primary" id="wdt_re">Litigation Calender</button>-->
				<h2 id="user_header">Change Compliance Owner</h2>
				<!-- <a ng-click="backToPreviousState()"><img src="images/DashboardIcons/backold.png" class="backButton" width="100px;"></a> -->
				<site-header Back="" forward="forward"></site-header>
			</div>
		</div>

		<div class="div_style"></div>
		<!--first form-->
		<form class="form-horizontal" name="taskSearchForm" role="form" id="form">
			<div class="f_form_content">
				<h2>Search Assigned Compliance</h2>

				<div class="col-md-12">
					<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Vertical :</label>
								<div class="col-sm-8">
									<select class="form-control" name="orga_id" ng-model="tmapObj.orga_id" ng-options="e.orga_id as e.orga_name for e in entityList" 
									ng-change = "getUnitListByEntity(tmapObj.orga_id); getLegislationList()" required>
									<option value="">--Select--</option>
									 </select>
									
								</div>
							</div>
						</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Unit :</label>
							<div class="col-sm-8">
									<select class="form-control" name="loca_id" ng-model="tmapObj.loca_id" ng-options="u.loca_id as u.loca_name for u in unitList| orderBy:'loca_name'" 
									ng-change = "getFunctionListByUnit(tmapObj.loca_id,tmapObj.orga_id); getLegislationList()" required>
									<option value="">--Select--</option>
									</select>
							</div>
						</div>
					</div>

					<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Function:</label>
								<div class="col-sm-8">
									<select class="form-control" name="dept_id" ng-model="tmapObj.dept_id" ng-options="f.dept_id as f.dept_name for f in functionList" ng-change= "getExecutorList(); getLegislationList()"  required>
									<option value="">--Select--</option>
									</select>
								</div>
							</div>
						</div>
						 
					<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Owner:</label>
								<div class="col-sm-8">
									<select class="form-control" name="pr_user_id" ng-model="tmapObj.pr_user_id" ng-options="ex.user_id as ex.user_name for ex in executorList" ng-change= "getEvaluatorList()" required>
									<option value="">--Select--</option>
									</select>
								</div>
							</div>
						</div>
						
					<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Approver:</label>
								<div class="col-sm-8">
									<select class="form-control" name="rw_user_id" ng-model="tmapObj.rw_user_id" ng-options="ev.user_id as ev.user_name for ev in evaluatorList" ng-change = "getFunHeadList()" required>
									<option value="">--Select--</option>
									</select>
								</div>
							</div>
						</div>
						
					<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Function Head:</label>
								<div class="col-sm-8">
									<select class="form-control" name="fh_user_id" ng-model="tmapObj.fh_user_id" ng-options="fh.user_id as fh.user_name for fh in functionheadList" required>
									<option value="">--Select--</option>
									</select>
								</div>
							</div>
					</div>
					
					<div class="form-group">
							<label class="control-label col-sm-3" for="sel1">Legislation
								:</label>
							<div class="col-sm-9">
								<ui-select ng-model="legiList.selected" theme="bootstrap"
										style="max-width: 545px;" ng-change="getalllegiRuleList()"> 
										<ui-select-match placeholder="Select legislation">{{$select.selected.task_legi_name}}
										<button class="clear" ng-click="clearLegiList($event)">X</button>
										</ui-select-match>
									<ui-select-choices
										repeat="legiList in alllegiList | propsFilter: {task_legi_name: $select.search}">
									<div
										ng-bind-html="legiList.task_legi_name | highlight: $select.search"></div>
									</ui-select-choices> </ui-select>
							</div>
						</div>
						<div class="form-group">
							<label class="control-label col-sm-3" for="sel1">Rules :</label>
							<div class="col-sm-9">
								<ui-select ng-model="legiRuleL.selected" ng-change="" theme="bootstrap"  style="max-width: 545px;">
								    <ui-select-match placeholder="Select rules">
								     <button class="clear" ng-click="clearLegiRuleL($event)">X</button>
								    {{$select.selected.task_rule_name}}</ui-select-match>
								    <ui-select-choices repeat="legiRuleL in legiRuleList | propsFilter: {task_rule_name: $select.search}">
								     
								      <div ng-bind-html="legiRuleL.task_rule_name | highlight: $select.search"></div>
<!-- 								      {{legiRuleL.task_rule_name}} -->
								    </ui-select-choices>
								  </ui-select>
							</div>
						</div>

				</div>
					<div class="col-md-12">
						<br>
						<div class="col-md-12 litigation_buttons">
							<center>
								<input type="button" class="btn btn-myPrimary" value="Search"
									name="search" id="search_task_enable" ng-click="searchTasks();getEntityListOnSearch()" />
								<div id="loader" style="display: none;">
									<img src="./images/Loader/WaitLoader.gif" width="80px"
										height="85px" />
								</div>
							</center>
						</div>
					</div>

				</div>
		</form>
		<!--END first form-->
			<div style="clear: both;"></div>
			
			<br>
			<!--Second form-->
		<form class="form-horizontal" name="assignTaskForm" novalidate>
			<div class="f_form_content">
				<h2>New Compliance Owner</h2>

				<div class="col-md-12">
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Vertical :</label>
							<div class="col-sm-8">
<!-- 							 ng-change="getFunctionListByUIdEId(tmapObj.tmap_orga_id,tmapObj.tmap_loca_id)" -->
									<select class="form-control" name="tmap_orga_id" ng-model="tmapObj.tmap_orga_id" ng-options="en.orga_id as en.orga_name for en in entityListOnSearch" 
									ng-change = "getUnitListByEntity(tmapObj.tmap_orga_id)" required>
									<option value="">--Select--</option>
									</select><i class="asterisk_input"></i>
									<div ng-messages="assignTaskForm.tmap_orga_id.$error" ng-if="assignTaskForm.$submitted">
										  <span class="error-text" ng-message="required">Select Entity.</span>
									</div>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Unit :</label>
							<div class="col-sm-8">
<!-- 							ng-change="getFunctionListByUIdEId(tmapObj.tmap_orga_id,tmapObj.tmap_loca_id)" -->
									<select class="form-control" name="tmap_loca_id" ng-model="tmapObj.tmap_loca_id" ng-options="u.loca_id as u.loca_name for u in unitList| orderBy:'loca_name'" 
									ng-change = "getFunctionListByUnit(tmapObj.tmap_loca_id,tmapObj.tmap_orga_id)" required>
									<option value="">--Select--</option>
									</select><i class="asterisk_input"></i>
									<!-- <select class="form-control" name="tmap_loca_id" id="tmap_loca_id" ng-model=" selectedUnit" multiple ng-options="u.loca_id as u.loca_name for u in unitList" ng-change = "getFunctionListByUnit()"></select><i class="asterisk_input"></i> -->
									<div ng-messages="assignTaskForm.tmap_loca_id.$error" ng-if="assignTaskForm.$submitted">
										  <span class="error-text" ng-message="required">Select unit.</span>
									</div>
							</div>
						</div>
					</div>

					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Function
								:</label>
							<div class="col-sm-8">
									<select class="form-control" name="tmap_dept_id" ng-model="tmapObj.tmap_dept_id" ng-options="f.dept_id as f.dept_name for f in functionList" ng-change= "getExecutorListOnSearch()"  required>
									<option value="">--Select--</option>
									</select><i class="asterisk_input"></i>
									<div ng-messages="assignTaskForm.tmap_dept_id.$error" ng-if="assignTaskForm.$submitted">
										  <span class="error-text" ng-message="required">Select function.</span>
									</div>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Owner
								:</label>
							<div class="col-sm-8">
									<select class="form-control" name="tmap_pr_user_id" ng-model="tmapObj.tmap_pr_user_id" ng-options="ex.user_id as ex.user_name for ex in executorList" ng-change= "getEvaluatorListOnSearch()" required>
									<option value="">--Select--</option>
									</select><i class="asterisk_input"></i>
									<div ng-messages="assignTaskForm.tmap_pr_user_id.$error" ng-if="assignTaskForm.$submitted">
										  <span class="error-text" ng-message="required">Select Owner.</span>
									</div>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Approver
								:</label>
							<div class="col-sm-8">
									<select class="form-control" name="tmap_rw_user_id" ng-model="tmapObj.tmap_rw_user_id" ng-options="ev.user_id as ev.user_name for ev in evaluatorList" ng-change = "getFunHeadListOnSearch()" required>
									<option value="">--Select--</option>
									</select><i class="asterisk_input"></i>
									<div ng-messages="assignTaskForm.tmap_rw_user_id.$error" ng-if="assignTaskForm.$submitted">
										  <span class="error-text" ng-message="required">Select Approver.</span>
									</div>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Function Head
								:</label>
							<div class="col-sm-8">
									<select class="form-control" name="tmap_fh_user_id" ng-model="tmapObj.tmap_fh_user_id" ng-options="fh.user_id as fh.user_name for fh in functionheadList" required>
									<option value="">--Select--</option>
									</select><i class="asterisk_input"></i>
									<div ng-messages="assignTaskForm.tmap_fh_user_id.$error" ng-if="assignTaskForm.$submitted">
										  <span class="error-text" ng-message="required">Select function head.</span>
									</div>
							</div>
						</div>
					</div>

				</div>
				<div class="col-md-12">
					<br>
					<div class="col-md-12 litigation_buttons">
						<center>
							<div id="assignButton" >
							<input type="submit" value="Assign" class="btn btn-myPrimary"  ng-click="assginTask(assignTaskForm.$valid)"/>
						</div>
						<div id="loader" class="display_style">
							<img src="./images/Loader/WaitLoader.gif" width="80px" height="85px" />
						</div>
						</center>
					</div>
				</div>
				
			</div>
		</form>	
		<!--End second form-->
			<div class="table_data1">
				<div class="container">

				<div class="col-sm-6">
					<div class="col-md-3 " id="selectAllDiv" >
					<input type="checkbox" id="selectAll" ng-model="selectedAll" ng-change="checkAll()"><b>Select All</b>
				</div>
				
					
						
						<div class="col-sm-4">
							<label class="control-label" for="">Selected Task : {{tmapObj.tasks_list.length}}</label> <label
								class="control-label lblcount" for="selectedtask"></label>
						</div>
						
						<label class="control-label " for="">Total Task :</label>
			<label class="control-label lblcount" for="totaltask">{{All_Tasks.length}}</label>
					</div>

					<table id="example" class="table table-striped table-bordered"
						width="100%" cellspacing="0">
						<thead>
							<tr class="table_row">
								
								<th>Task ID</th>
								<th>Name of Legislation</th>
								<th>Rule</th>
								<th>Reference</th>
								<th>Who</th>
								<th>When</th>
								<th>Activity</th>
								<th>Procedure</th>
								<!-- <th>Impact</th>
								<th>Frequency</th> -->
								<th>Owner</th>
							</tr>
						</thead>

						<tbody id="task_table_body">
							<tr ng-repeat="repo in All_Tasks" ng-if="All_Tasks.length>0">
							<td><center><input type="checkbox" name="clientTaskId" class="taskId" ng-model="repo.selectedId" ng-change="getCheckTaskId(repo.selectedId,repo.tmap_id)"/></br>{{repo.tmap_client_tasks_id}}</center></td>			
							<td>{{repo.task_legi_name}}</td>
							<td>{{repo.task_rule_name}}</td>
							<td>{{repo.task_reference}}</td>
							<td>{{repo.task_activity_who}}</td>
							<td>{{repo.task_activity_when}}</td>
							<td>{{repo.task_activity}}</td>
							<td>{{repo.task_procedure}}</td>
							<td>{{repo.executor_name}}</td>
													 
						</tr>
						<tr ng-if="All_Tasks.length==0">
							<td colspan=12><center>No record found</center></td>
						</tr>
						</tbody>
					</table>
				</div>
		
	</div>
</div>
</div>
 

</div>