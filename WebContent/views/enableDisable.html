
<div>
<div class="page_cont_padd">
	<div class="page_container">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="header_button">
						<!--<button type="button" class="btn btn-primary" id="wdt_re">Litigation Summary</button>-->
						<h2 style="color: #032BEC; font-size: 24px; float: left;">Enable/Disable
							Task</h2>
						<!-- <a ng-click="backToPreviousState()"><img
							src="images/DashboardIcons/backold.png" class="backButton"
							width="100px;"></a> -->
						<site-header Back="" forward="forward"></site-header>
					</div>
				</div>

			</div>
			<!-- Filters -->
			<form autocomplete="off" name="taskSearchForm" class="form-horizontal" novalidate>
				<div class="f_form_content">
					<h2>Search</h2>
					<div class="col-md-12">

						<div class="col-md-4">
								<div class="form-group">
									<label class="control-label col-sm-4" for="sel1">Vertical
										:</label>
									<div class="col-sm-8">
										<select class="form-control" name="orga_id"
											ng-model="searchObj.orga_id"
											ng-options="e.orga_id as e.orga_name for e in entityList"
											ng-change="getUnitListByEntity(searchObj.orga_id);getExecutorListForActivationPage();getEvalListForActivationPage();getLegislationList()"
											required>
											<option value="">--Select--</option>
										</select><i class="asterisk_input"></i>
									</div>
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label class="control-label col-sm-4" for="sel1">Unit :</label>
									<div class="col-sm-8">
										<select class="form-control" name="loca_id"
											ng-model="searchObj.loca_id"
											ng-options="u.loca_id as u.loca_name for u in unitList | orderBy:'loca_name'"
											ng-change="getFunctionListByUnit(searchObj.loca_id,searchObj.orga_id);getExecutorListForActivationPage();getEvalListForActivationPage();getLegislationList()"
											required>
											<option value="">--Select--</option>
										</select><i class="asterisk_input"></i>
									</div>
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label class="control-label col-sm-4" for="sel1">Function:</label>
									<div class="col-sm-8">
										<select class="form-control" name="dept_id"
											ng-model="searchObj.dept_id"
											ng-options="f.dept_id as f.dept_name for f in functionList"
											ng-change="getExecutorListForActivationPage();getEvalListForActivationPage();getLegislationList()"
											required>
											<option value="">--Select--</option>
										</select><i class="asterisk_input"></i>
									</div>
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label class="control-label col-sm-4" for="sel1">Owner:</label>
									<div class="col-sm-8">
										<select class="form-control" name="exec_id"
											ng-model="searchObj.exec_id"
											ng-options="ex.user_id as ex.user_name for ex in executorList">
											<option value="">--Select--</option>
										</select>
									</div>
								</div>
							</div>
							<div class="col-md-4">
								<div class="form-group">
									<label class="control-label col-sm-4" for="sel1">Approver:</label>
									<div class="col-sm-8">
										<select class="form-control" name="eval_id"
											ng-model="searchObj.eval_id"
											ng-options="ev.user_id as ev.user_name for ev in evaluatorList">
											<option value="">--Select--</option>
										</select>
									</div>
								</div>
							</div>
							<!-- <div class="col-md-4">
								<div class="form-group">
									<label class="control-label col-sm-4" for="sel1">Active/Inactive:</label>
									<div class="col-sm-8">
										<select class="form-control" id="status"
											ng-model="searchObj.ttrn_status">
											<option value="">--Select--</option>
											<option value="Active">Active</option>
											<option value="Inactive">Inactive</option>
										</select>
									</div>
								</div>
							</div> -->
							
								<div class="col-md-9">
									<div class="form-group">
										<label class="control-label col-sm-3" for="sel1">Legislation
											:</label>
										<div class="col-sm-9">
											<ui-select ng-model="legiList.selected" theme="bootstrap"
												style="max-width: 545px;" ng-change="getalllegiRuleList()">
											<ui-select-match placeholder="Select legislation">{{$select.selected.task_legi_name}}
											<button class="clear" ng-click="clearLegiList($event)">X</button>
											</ui-select-match> <ui-select-choices
												repeat="legiList in alllegiList | propsFilter: {task_legi_name: $select.search}">
											<div
												ng-bind-html="legiList.task_legi_name | highlight: $select.search"></div>
											</ui-select-choices> </ui-select>
										</div>
									</div>
								</div>
								<div class="col-md-9">

									<div class="form-group">
										<label class="control-label col-sm-3" for="sel1">Rules
											:</label>
										<div class="col-sm-9">
											<ui-select ng-model="legiRuleL.selected" ng-change=""
												theme="bootstrap" style="max-width: 545px;"> <ui-select-match
												placeholder="Select rules">
											<button class="clear" ng-click="clearLegiRuleL($event)">X</button>
											{{$select.selected.task_rule_name}}</ui-select-match> <ui-select-choices
												repeat="legiRuleL in legiRuleList | propsFilter: {task_rule_name: $select.search}">

											<div
												ng-bind-html="legiRuleL.task_rule_name | highlight: $select.search"></div>
											<!-- 								      {{legiRuleL.task_rule_name}} --> </ui-select-choices> </ui-select>
										</div>
									</div>
								</div>
					
						
					</div>
					<div class="col-md-12 litigation_buttons">
						<br>
						<center>
							<input type="button" class="btn btn-myPrimary" value="Search" name="search" id="search_task_enable" ng-click="searchTasks()"/>
							
						</center>
						<div id="loader" style="display: none;">
							<center>
								<img src="./images/Loader/WaitLoader.gif" width="80px"
									height="85px" />
							</center>
						</div>
					</div>
				</div>
			</form>
			<!-- End Filters -->

		
<br/>
<br/>
      <div class="col-md-12 litigation_buttons" ng-show="showOnMultipleSelection">
				<center>
					<input type="button" class="btn btn-myPrimary" value="Enable" name="enable" id="multipleactivate"  ng-click="changeTaskStatus('enable',0)" /> 
					<input type="button" class="btn btn-myWarning" value="Disable"  name="disable" id="multipledeactivate" ng-click="changeTaskStatus('disable',0)"  />
				</center>
			</div>
			<br />
			<br />
			<center>
			<div id="loader1" style="display: none;">
							<img src="./images/Loader/WaitLoader.gif" width="80px" height="85px" />
						</div>
						</center>
			<br/>
			<br/>

			<div style="overflow-x: scroll;">	
			<div class="col-sm-6">
					<div class="col-md-3 " id="selectAllDiv" >
					<input type="checkbox" id="selectAll" ng-model="selectedAll" ng-change="checkAll()"><b>Select All</b>
				</div>
				
						<div class="col-sm-4">
							<label class="control-label" for="">Selected Task : {{tmapObj.tasks_list.length}}</label> <label
								class="control-label lblcount" for="selectedtask"></label>
						</div>
						
						<label class="control-label " for="">Total Task :</label>
							<label class="control-label lblcount" for="totaltask">{{All_Tasks.length}}</label>
						</div>
				
				<table id="example" class="table table-striped table-bordered"
					width="100%" cellspacing="0">
					<thead id="task_table_body">
						<tr style="background: #0B6EC3; color: #fff;">
						
							<th><center>
									Client-Task-Id <br />
								</center></th>
								<th>Lexcare Task Id</th>
							<th>Name Of Legislation </th>
							<th>Rule</th>
							<th>Reference</th>
							<th>Who</th>
							<th>When</th>
							<th>Activity</th>
							<th>Procedure</th>
							<th>Owner</th>
							<th>Enable/Disable</th>
							<th ng-if="editDate.role>=6">Action</th>
						</tr>
					</thead>
					<tbody id="search_result">
					<tr ng-repeat="repo in All_Tasks" ng-if="All_Tasks.length>0">
							<td><center><input type="checkbox" name="clientTaskId" class="taskId" ng-model="repo.selectedId" ng-change="getCheckTaskId(repo.selectedId,repo.tmap_id)"/></center>{{repo.tmap_client_tasks_id}}</td>			
							<td>{{repo.task_lexcare_id}}</td>
							<td>{{repo.task_legi_name}}</td>
							<td>{{repo.task_rule_name}}</td>
							<td>{{repo.task_reference}}</td>
							<td>{{repo.task_activity_who}}</td>
							<td>{{repo.task_activity_when}}</td>
							<td>{{repo.task_activity}}</td>
							<td>{{repo.task_procedure}}</td>
							<td>{{repo.executor_name}}</td>
							<td ng-if="repo.tmap_enable_status==1"><input
									class="btn btn-danger" type="button" name="DisableTask"
									value="Disable"
									ng-click="changeTaskStatus('disable',repo.tmap_id)" /></td>
							<td ng-if="repo.tmap_enable_status==0"><input
									class="btn btn-success" type="button" name="EnableTask"
									value="Enable"
									ng-click="changeTaskStatus('enable',repo.tmap_id)" /></td>
							<td ng-if="editDate.role>=6"> <input
									class="btn btn-danger" type="button" name="DeleteTask"
									value="Delete Task"
									ng-click="DeleteTask(repo.tmap_client_tasks_id,repo.tmap_id,$event,$index)" /> 
									
									<button type="button"  class="btn btn-danger" 
									ng-click="deleteTaskMapping(repo,$event,$index)">
								<i class='fa fa-trash'></i>&nbsp;Delete Task Mapping 
								</button>
									
									</td>

							</tr>
						<tr ng-if="All_Tasks.length==0">
							<td colspan=12><center>No record found</center></td>
						</tr>
						
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

</div>