<!-- Full Calendar  -->
<link href="css/plugins/fullcalendar/fullcalendar.min.css"
	rel="stylesheet" type="text/css" />
<link href="css/plugins/fullcalendar/fullcalendar.print.css"
	rel="stylesheet" type="text/css" media='print' />

<script src="css/plugins/fullcalendar/moment.min.js"
	type="text/javascript"></script>
<script src="css/plugins/fullcalendar/fullcalendar.js"
	type="text/javascript"></script>
<!-- END Full Calendar  -->


<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.2.0/fullcalendar.min.js" type="text/javascript"></script>
<link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.2.0/fullcalendar.min.css" rel="stylesheet" type="text/css" />
<link href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.2.0/fullcalendar.print.css" rel="stylesheet" type="text/css" media='print' /> -->
<div>
	<div class="page_cont_padd">
		<div class="page_container">
			<!--heading text-->

			<div class="col-md-12">
				<div class="header_button">
					<!--<button type="button" class="btn btn-primary" id="wdt_re">Litigation Summary</button>-->
					<h2 style="color: #032BEC; font-size: 24px; float: left;">Compliance
						Calendar</h2>
					<!-- <a ng-click="backToPreviousState()"><img src="images/DashboardIcons/backold.png" class="backButton" width="100px;"></a> -->
					<site-header Back="" forward="forward"></site-header>
				</div>
			</div>
			<div style="clear: both"></div>
			<!--first form-->
			<form autocomplete="off" name="calendarForm" class="form-horizontal">
				<div class="f_form_content">
					<h2>Search</h2>

					<div class="col-md-12">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Vertical:</label>
								<div class="col-sm-7">

									<select class="form-control" name="orga_id"
										ng-model="configObj.orga_id"
										ng-options="e.orga_id as e.orga_name for e in entityList"
										ng-change="getUnitListByEntity(configObj.orga_id);getExeEvalFunctionHeadList()">
										<option value="">--Select--</option>
									</select> <i class="asterisk_input"></i>
									<div ng-messages="calendarForm.orga_id.$error"
										ng-if="calendarForm.$submitted">
										<span class="error-text" ng-message="required">Select
											Entity.</span>
									</div>
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Unit:</label>
								<div class="col-sm-7">
									<select class="form-control" name="loca_id"
										ng-model="configObj.loca_id"
										ng-options="u.loca_id as u.loca_name for u in unitList | orderBy:'loca_name'"
										ng-change="getFunctionListByUnit(configObj.loca_id,configObj.orga_id);getExeEvalFunctionHeadList()">
										<option value="">--Select--</option>
									</select>
									<!-- <div ng-messages="calendarForm.loca_id.$error"
									ng-if="calendarForm.$submitted">
									<span class="error-text" ng-message="required">Select
										unit.</span>
								</div> -->
								</div>
							</div>
						</div>


						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Function:</label>
								<div class="col-sm-7">
									<select class="form-control" name="dept_id"
										ng-model="configObj.dept_id"
										ng-options="f.dept_id as f.dept_name for f in functionList"
										ng-change="getExeEvalFunctionHeadList()">
										<option value="">--Select--</option>
									</select>
									<!-- <div ng-messages="calendarForm.enti_dept_id.$error" ng-if="calendarForm.$submitted">
										  <span class="error-text" ng-message="required">Select function.</span>
									</div> -->
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Owner:</label>
								<div class="col-sm-7">
									<select class="form-control" name="pr_user_id"
										ng-model="configObj.pr_user_id"
										ng-options="ex.user_id as ex.user_name for ex in executorList">
										<option value="">--Select--</option>
									</select>
									<!-- <div ng-messages="calendarForm.enti_dept_id.$error" ng-if="calendarForm.$submitted">
										  <span class="error-text" ng-message="required">Select function.</span>
									</div> -->
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Approver
									:</label>
								<div class="col-sm-7">
									<select class="form-control" name="rw_user_id"
										ng-model="configObj.rw_user_id"
										ng-options="ev.user_id as ev.user_name for ev in evaluatorList">
										<option value="">--Select--</option>
									</select>
									<!-- <div ng-messages="calendarForm.enti_dept_id.$error" ng-if="calendarForm.$submitted">
										  <span class="error-text" ng-message="required">Select function.</span>
									</div> -->
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Function
									Head:</label>
								<div class="col-sm-7">
									<select class="form-control" name="fh_user_id"
										ng-model="configObj.fh_user_id"
										ng-options="ev.user_id as ev.user_name for ev in functionHeadList">
										<option value="">--Select--</option>
									</select>
									<!-- <div ng-messages="calendarForm.enti_dept_id.$error" ng-if="calendarForm.$submitted">
										  <span class="error-text" ng-message="required">Select function.</span>
									</div> -->
								</div>
							</div>
						</div>


						<!-- <div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Frequency :</label>
							<div class="col-sm-7">
								<select class="form-control" id="frequency">
									<option value="0">--Select--</option>
								</select>
							</div>
						</div>
					</div> -->

					</div>

					<div class="col-md-12 litigation_buttons">
						<br>
						<center>
							<button type="button" id="task_calendar" ng-click="searchTask()"
								class="btn btn-myPrimary">Search</button>
							<div id="loader" style="display: none;">
								<img src="./images/Loader/WaitLoader.gif" width="80px"
									height="85px" />
							</div>

							<div id="noFound"></div>
						</center>
					</div>
				</div>
			</form>



			<div style="clear: both"></div>
			<div class="box box-primary">
				<div class="box-body">
					<div id="calendar">
						<div ui-calendar="uiConfig.calendar" class="calendar"
							ng-model="eventSources" calendar="eventCalendar"></div>
					</div>
				</div>
			</div>

		</div>
	</div>

	<div id="changeTask" class="modal fade" role="dialog">
		<div class="modal-dialog"
			style="width: 1300px; overflow-y: scroll; max-height: 85%; margin-top: 50px; margin-bottom: 50px;">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Task Details</h4>
				</div>
				<form autocomplete="off" name="taskDetailsForm" role="form"
					class="form-horizontal" novalidate>
					<div class="modal-body-drilled"
						style="width: 1250px; overflow-x: auto;">
						<div style="clear: both"></div>

						<div ng-cloak>
							<md-content> <md-tabs md-dynamic-height
								md-border-bottom> <md-tab label="Task Details">
							<div class="f_form_content">
								<h2>Organogram Information</h2>

								<div class="col-md-12 light">
									<div class="col-md-2">
										<label>Unit Task ID :</label>
									</div>
									<div class="col-md-10">
										<span>{{task_details.task_details[0].unit_task_id}}</span>
									</div>
								</div>

								<div class="col-md-12 dark">
									<div class="col-md-2">
										<label>Vertical :</label>
									</div>
									<div class="col-md-10">
										<span>{{task_details.task_details[0].entity}}</span>
									</div>
								</div>

								<div class="col-md-12 light">
									<div class="col-md-2">
										<label>Unit :</label>
									</div>
									<div class="col-md-10">
										<span>{{task_details.task_details[0].unit}}</span>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-2 ">
										<label>Function :</label>
									</div>
									<div class="col-md-10">
										<span>{{task_details.task_details[0].function}}</span>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-2 ">
										<label>Owner :</label>
									</div>
									<div class="col-md-10">
										<span>{{task_details.task_details[0].executor}}</span>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-2 ">
										<label>Approver :</label>
									</div>
									<div class="col-md-10">
										<span>{{task_details.task_details[0].evaluator}}</span>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-2 ">
										<label>Function Head :</label>
									</div>
									<div class="col-md-10">
										<span>{{task_details.task_details[0].function_head}}</span>
									</div>
								</div>

							</div>

							<div style="clear: both;"></div>

							<div class="f_form_content">
								<h2>Task Details</h2>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Legislation :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].legislation}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Rule :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].rule}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Reference :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].reference}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Who :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].who}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>When :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].when}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Compliance Activity :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].activity}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Procedure :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].procedure}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>More Information :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].more_information}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Prohibitive / Prescriptive :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].prescriptive}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Frequency :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].frequency}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Form No. :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].form_no}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Due date :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].due_date}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Specific due date :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].specific_due_date}}</span>
										</div>
									</div>
								</div>

								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Type of Task :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].type_of_task}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Responsibility :</label>
										</div>
										<div class="col-md-10">
											<span>NA</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Corporate Level or Unit Level :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].level}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Exemption Criteria :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].excemption_criteria}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Events :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].event}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Sub Event :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].sub_event}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Implications :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].implications}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Imprisonment Duration :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].imprisonment}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Imprisonment Applies to :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].imprisonment_applies_to}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Fine amount :</label>
										</div>
										<div class="col-md-10">
											<span> <strong> <i class="fa fa-inr"></i>
													{{task_details.task_details[0].fine_amount}}
											</strong>
											</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Subsequent Amount per Day :</label>
										</div>
										<div class="col-md-10">
											<span> <strong><i class="fa fa-inr"></i>
													{{task_details.task_details[0].fine_amount_per_day}}</strong>
											</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Impact :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].impact}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Impact on Unit :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].impact_on_unit}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Impact on organization :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].impact_on_entity}}</span>
										</div>
									</div>
								</div>

								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Interlinkage :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].interlinkage}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Linked Task ID :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].linked_task_id}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 light">
									<div class="col-md-12">
										<div class="col-md-2">
											<label>Weblink :</label>
										</div>
										<div class="col-md-10">
											<span>{{task_details.task_details[0].weblink}}</span>
										</div>
									</div>
								</div>
								<div class="col-md-12 dark">
									<div class="col-md-2">
										<label>Lexcare Task ID :</label>
									</div>
									<div class="col-md-10">
										<span>{{task_details.task_details[0].lexcare_task_id}}</span>
									</div>
								</div>
							</div>

							</md-tab>
							<md-tab label="Task History">
							<div class="col-md-12"
								style="overflow-x: scroll; margin-top: 20px; width: 96%;">
								<table class="table table-bordered" id="tbltask">
									<thead>
										<tr style="background: #0B6EC3; color: #fff;">
											<!-- <th>Function</th> -->
											<th>Owner</th>
											<th>Owner Date</th>
											<th>Approver Date</th>
											<th>Function Head Date</th>
											<th>Unit Head Date</th>
											<th>Legal Date</th>
											<th class="editDatesOfHistorypage"
												ng-if="editDate.role==6 || editDate.role==7">Edit Dates</th>
											<th>Completed By</th>
											<th>Completed On</th>
											<th>Comments</th>
											<th>Task Status</th>
											<th>Legal Task Status</th>
											<th>Document</th>
											<th>Update History</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="history in task_history "
											class="{{history.ttrn_legal_task_style}}"
											ng-if="task_history.length>0">
											<!-- style="background-color: #F53636; font-weight: bold;"  -->

											<td>{{history.ttrn_performer_name}}</td>
											<td>{{history.ttrn_pr_due_date}}</td>
											<td>{{history.ttrn_rw_due_date}}</td>
											<td>{{history.ttrn_fh_due_date}}</td>
											<td>{{history.ttrn_uh_due_date}}</td>
											<td>{{history.ttrn_legal_due_date}}</td>
											<td ng-if="editDate.role==6 || editDate.role==7"><span
												ng-if="history.ttrn_task_status!='Completed' && history.ttrn_task_status!='Event_Not_Occured'"><img
													title="Edit Configuration"
													style="cursor: pointer; cursor: hand;"
													src="images/taskActivationImg/config.png"
													ng-click="editDates(history)" width="40px" height="40px" /></span></td>
											<td>{{history.ttrn_task_completed_by}}</td>
											<td>{{history.ttrn_completed_date}}</td>
											<td>{{history.ttrn_performer_comments}}</td>
											<td>{{history.ttrn_task_status}}</td>
											<td>{{history.ttrn_legal_task_status}}</td>
											<td>
												<p ng-repeat="doc in history.document_list">
													<a
														ng-click="downloadProof(doc.udoc_id,history.client_task_id)">
														{{doc.udoc_original_file_name}} </a> <a
														style="cursor: pointer;"
														ng-click="deleteTaskDocument(doc.udoc_id,history.client_task_id,$event,$index)">
														<i class='glyphicon glyphicon-remove-circle uploadClose'
														title='Delete Document'></i>
													</a>
												</p>
											</td>
											<td>
												<!-- <a
												ng-if="history.ttrn_task_status=='Active' && history.ttrn_allow_completion=='yes' || history.ttrn_task_status=='Re_Opened' && history.ttrn_allow_completion=='yes'"
												ng-click="CompleteTaskPage(history.ttrn_id,history.ttrn_document,history.ttrn_performer_comments,0,history.ttrn_legal_task_status,history.ttrn_reason_for_non_compliance,history.task_frequency,history.ttrn_legal_due_date,history.client_task_id)"
												class="btn btn-success">Complete Task</a> <a
												ng-if="history.ttrn_task_status=='Partially_Completed' && editDate.role>1 && currentuser==task_details.task_details[0].evaluator || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser!=task_details.task_details[0].executor || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser==task_details.task_details[0].executor && currentuser==task_details.task_details[0].function_head || history.ttrn_task_status=='Partially_Completed' && editDate.role>3"
												ng-click="approveTask(history.ttrn_id,history.client_task_id)"
												class="btn btn-success">Approve Task</a> <a
												style="margin-top: 10px;"
												ng-if="history.ttrn_task_status=='Partially_Completed' && editDate.role>1 && currentuser==task_details.task_details[0].evaluator || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser!=task_details.task_details[0].executor || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser==task_details.task_details[0].executor && currentuser==task_details.task_details[0].function_head || history.ttrn_task_status=='Partially_Completed' && editDate.role>3"
												ng-click="reopenTask(history)" class="btn btn-success"
												data-toggle="modal" data-target="#reOpenTask">Re-Open
													Task</a> <a style="margin-top: 10px;"
												ng-if="history.ttrn_task_status=='Completed' || history.ttrn_task_status=='Partially_Completed' || status == 'Delayed Reported'"
												ng-click="CompleteTaskPage(history.ttrn_id,0,history.ttrn_performer_comments,history.ttrn_completed_date,history.ttrn_legal_task_status,history.ttrn_reason_for_non_compliance,history.task_frequency,history.ttrn_legal_due_date,history.client_task_id)"
												class="btn btn-success">Update Task</a> <a
												style="margin-top: 10px;"
												ng-if="history.ttrn_legal_task_status=='Non Complied' || legalDueDate < currentDate"
												ng-click="reasonForNonCompliance(history)"
												class="btn btn-danger" data-toggle="modal"
												data-target="#resonForNonCompliance">&nbsp;Reason For
													Non-Compliance</a> <a style="margin-top: 10px;"
												ng-if="editDate.role == 6 || editDate.role == 7"
												ng-click="deleteTask(history.ttrn_id,history.client_task_id,$event,$index)"
												class="btn btn-danger"><i class='fa fa-trash'></i>&nbsp;Delete
													Task</a>
													
													 --> <!-- start of td auditConditionTwo  --> <!-- {{ history.auditConditionTwo }} -->
												<div ng-if="history.auditConditionTwo == 'Yes' ">
													<a
														ng-if="history.ttrn_task_status=='Active' && history.ttrn_allow_completion=='yes' || history.ttrn_task_status=='Re_Opened' && history.ttrn_allow_completion=='yes'"
														ng-click="CompleteTaskPage(history.ttrn_id,history.ttrn_document,history.ttrn_performer_comments,0,history.ttrn_legal_task_status,history.ttrn_reason_for_non_compliance,history.task_frequency,history.ttrn_legal_due_date,history.client_task_id)"
														class="btn btn-success">Complete Task</a> <a
														ng-if="history.ttrn_task_status=='Partially_Completed' && editDate.role>1 && currentuser==task_details.task_details[0].evaluator || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser!=task_details.task_details[0].executor || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser==task_details.task_details[0].executor && currentuser==task_details.task_details[0].function_head || history.ttrn_task_status=='Partially_Completed' && editDate.role>3"
														ng-click="approveTask(history.ttrn_id,history.client_task_id)"
														class="btn btn-success">Approve Task</a> <a
														style="margin-top: 10px;"
														ng-if="history.ttrn_task_status=='Partially_Completed' && editDate.role>1 && currentuser==task_details.task_details[0].evaluator || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser!=task_details.task_details[0].executor || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser==task_details.task_details[0].executor && currentuser==task_details.task_details[0].function_head || history.ttrn_task_status=='Partially_Completed' && editDate.role>3"
														ng-click="reopenTask(history)" class="btn btn-success"
														data-toggle="modal" data-target="#reOpenTask">Re-Open
														Task</a> <a style="margin-top: 10px;"
														ng-if="history.ttrn_task_status=='Completed' || history.ttrn_task_status=='Partially_Completed'"
														ng-click="CompleteTaskPage(history.ttrn_id,0,history.ttrn_performer_comments,history.ttrn_completed_date,history.ttrn_legal_task_status,history.ttrn_reason_for_non_compliance,history.task_frequency,history.ttrn_legal_due_date,history.client_task_id)"
														class="btn btn-success">Update Task</a> <a
														style="margin-top: 10px;"
														ng-if="history.ttrn_legal_task_status=='Non Complied' || legalDueDate < currentDate"
														ng-click="reasonForNonCompliance(history)"
														class="btn btn-danger" data-toggle="modal"
														data-target="#resonForNonCompliance">&nbsp;Reason For
														Non-Compliance</a> <a style="margin-top: 10px;"
														ng-if="editDate.role == 6 || editDate.role == 7"
														ng-click="deleteTask(history.ttrn_id,history.client_task_id,$event,$index)"
														class="btn btn-danger"><i class='fa fa-trash'></i>&nbsp;Delete
														Task</a>
												</div> <!-- end of td -->

												<div ng-if="history.auditConditionTwo == 'No' ">

													<div
														ng-if="(editDate.role > 0 && editDate.role <= 5 || editDate.role >= 8 && editDate.role <= 11 || editDate.role >= 13) || editDate.role != 6 && editDate.role != 7 && editDate.role != 12 ">
														Date is crossed! You cannot update tasks.</div>

													<div
														ng-if="editDate.role == 6 || editDate.role == 7 || editDate.role == 12 ">
														Do you want to re-open tasks? <a style="margin-top: 10px;"
															ng-if="editDate.role>1 && currentuser==task_details.task_details[0].evaluator || editDate.role==3 && currentuser!=task_details.task_details[0].executor || editDate.role==3 && currentuser==task_details.task_details[0].executor && currentuser==task_details.task_details[0].function_head || editDate.role>3"
															ng-click="reopenTask(history)" class="btn btn-success"
															data-toggle="modal" data-target="#reOpenTask">Re-Open
															Task</a>
													</div>


												</div>


											</td>

										</tr>
										<tr ng-if="task_history.length==0">
											<td colspan="14" style="text-align: center;">Task is not
												configured.</td>
										</tr>


									</tbody>
								</table>
							</div>
							</md-tab> <md-tab ng-if="subTaskHistory.length>0" label="Sub Tasks">
							<div style="overflow-x: scroll; margin-top: 20px; width: 100%;"
								class="col-md-12">
								<table class="table table-bordered" style="width: 100%;">
									<thead>
										<tr style="background: #0B6EC3; color: #fff;">
											<!-- <th>Function</th> -->
											<th>Sub Task ID</th>
											<th>Name Of Contractor</th>
											<th>Compliance Activity</th>
											<th>Unit</th>
											<th>Compliance Title</th>
											<th>Frequency</th>
											<th>Owner Date</th>
											<th>Approver Date</th>
											<th>Function Head Date</th>
											<th>Unit Head Date</th>
											<th>Vertical Head Date</th>
											<!-- <th>Examination Date</th> -->
											<th class="editDatesOfHistorypage"
												ng-if="editDate.role==6 || editDate.role==7">Edit Dates</th>
											<th>Sub Task Status</th>
											<th>Legal Sub Task Status</th>
											<th>Documents</th>
											<th>Action Taken</th>
										</tr>
									</thead>
									<tbody>

										<tr ng-repeat="history in subTaskHistory"
											class='{{history.ttrn_legal_task_style}}'
											ng-if="subTaskHistory.length>0">
											<!-- style="background-color: #F53636; font-weight: bold;"  -->

											<td>{{history.ttrn_sub_id}}</td>
											<td>{{history.ttrn_sub_equip_number}}</td>
											<td>{{history.ttrn_sub_equip_desc}}</td>
											<td>{{history.ttrn_sub_equip_loca}}</td>
											<td>{{history.ttrn_sub_equip_type}}</td>
											<td>{{history.ttrn_sub_equip_frequency}}</td>
											<td>{{history.ttrn_pr_due_date}}</td>
											<td>{{history.ttrn_rw_due_date}}</td>
											<td>{{history.ttrn_fh_due_date}}</td>
											<td>{{history.ttrn_uh_due_date}}</td>
											<td>{{history.ttrn_legal_due_date}}</td>
											<!-- <td>{{history.ttrn_next_examination_date}}</td> -->
											<td ng-if="editDate.role==6 || editDate.role==7"><span
												ng-if="history.ttrn_task_status!='Completed'"><img
													title="Edit Configuration"
													style="cursor: pointer; cursor: hand;"
													src="images/taskActivationImg/config.png"
													ng-click="editSubTaskDates(history)" width="40px"
													height="40px" /></span></td>
											<td>{{history.ttrn_task_status}}</td>
											<td>{{history.ttrn_legal_task_status}}</td>
											<td>
												<p ng-repeat="doc in history.document_list">
													<a style="cursor: pointer;"
														ng-click="downloadSubtaskDocument(doc.udoc_id)">
														{{doc.udoc_original_file_name}} </a> <a
														style="cursor: pointer;"
														ng-click="deleteSubTaskDocument(doc.udoc_id,history.client_task_id,$event,$index)">
														<i class='glyphicon glyphicon-remove-circle uploadClose'
														title='Delete Document'></i>
													</a>
												</p>
											</td>
											<td><a
												ng-if="history.ttrn_task_status=='Active' || history.ttrn_task_status=='Re_Opened'"
												ng-click="subTaskComplete(history)" class="btn btn-success"
												data-toggle="modal" data-target="#SubTaskCompletion">Complete
													Task</a> <a style="margin-top: 10px;"
												ng-if="history.ttrn_task_status=='Completed' || history.ttrn_task_status=='Partially_Completed' || history.ttrn_task_status=='Delayed Reported'"
												ng-click="subTaskComplete(history)" class="btn btn-success"
												data-toggle="modal" data-target="#SubTaskCompletion">Update
													Task</a> <a style="margin-top: 10px;"
												ng-if="history.ttrn_task_status=='Partially_Completed' && editDate.role>1 && currentuser==task_details.task_details[0].evaluator || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser!=task_details.task_details[0].executor || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser==task_details.task_details[0].executor && currentuser==task_details.task_details[0].function_head || history.ttrn_task_status=='Partially_Completed' && editDate.role>3"
												ng-click="approveSubTask(history)" class="btn btn-success">Approve
													Task</a> <a style="margin-top: 10px;"
												ng-if="history.ttrn_task_status=='Partially_Completed' && editDate.role>1 && currentuser==task_details.task_details[0].evaluator || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser!=task_details.task_details[0].executor || history.ttrn_task_status=='Partially_Completed' && editDate.role==3 && currentuser==task_details.task_details[0].executor && currentuser==task_details.task_details[0].function_head || history.ttrn_task_status=='Partially_Completed' && editDate.role>3"
												ng-click="reopenSubTask(history)" class="btn btn-success"
												data-toggle="modal" data-target="#reOpenSubTask">Re-Open
													Task</a> <a style="margin-top: 10px;"
												ng-if="editDate.role == 6 || editDate.role == 7"
												ng-click="deleteSubTask(history.ttrn_sub_task_id,history.client_task_id,$event,$index)"
												class="btn btn-danger"><i class='fa fa-trash'></i>&nbsp;Delete
													Task</a></td>

										</tr>
										<tr ng-if="subTaskHistory.length==0">
											<td colspan="14" style="text-align: center;">Task is not
												configured.</td>
										</tr>

									</tbody>
								</table>
							</div>
							<!-- </md-tab> <md-tab label="Task Details" ng-click=""> -->
						</div>
						</md-tab>
						</md-tabs>
						</md-content>
					</div>
			</div>


		</div>
	</div>
	<div class="modal-footer">
		<!-- 	<button type="submit" class="btn btn-success" ng-click="sendQuery(ReasonForDisableForm.$valid)">Submit</button>
        <input class="btn btn-danger" type="reset" id="reset" name="reset" value="Clear" /> -->
	</div>
	</form>
</div>
</div>
</div>

<div id="completeTask" class="modal fade" role="dialog">
	<div class="modal-dialog" style="width: 1200px;">
		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Complete Task</h4>
			</div>
			<div id="taskCompletionLoader" class="modal fade" role="dialog"
				style="margin-left: 70px; margin-top: 200px;">
				<img src="./images/Loader/taskCompletionLoaderG.gif" width="90px"
					height="90px" />

				<!-- <h6>Please Wait....</h6> -->
			</div>
			<form autocomplete="off" name="taskCompletionForm" role="form"
				class="form-horizontal" novalidate>
				<div class="modal-body-drilled"
					style="width: 1175px; overflow-x: auto;">
					<div class="f_form_content">
						<h2>Task Completion</h2>
						<div class="col-md-2"></div>
						<div class="col-md-10">

							<div id="restOfTheControls">
								<div class="col-md-12" ng-if="frequency=='Event_Based'">
									<div class="form-group row">
										<label for="inputPassword3" class="col-sm-3 control-label">Event
											Not Occurred :</label>
										<div class="col-sm-2">
											<input type="checkbox" ng-model="eventNotOccured"
												ng-click="eventCheked(eventNotOccured)"
												name="eventNotOccured" id="eventNotOccured"
												style="margin-top: 12px;">
											<!-- {{eventNotOccured}}{{showEventNotOccured}} -->
										</div>
									</div>
								</div>
								<div ng-show="showEventNotOccured">
									<div class="col-md-12">
										<div class="form-group">
											<label for="inputPassword3" class="control-label col-sm-3"
												for="sel1">Completion Date :</label>
											<div class="col-sm-4">

												<p class="input-group" style="width: 281px;">
													<input type="text" class="form-control"
														ng-change="getDates()" uib-datepicker-popup="{{format}}"
														ng-model="taskCompletion.ttrn_completed_date"
														is-open="popup_legal.opened" close-text="Close"
														alt-input-formats="altInputFormats" readonly="readonly"
														required="true" /> <span class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_legal()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>


											</div>

										</div>
									</div>

									<div class="col-md-12" ng-if="frquency!='Event_Based'">
										<div class="form-group row">
											<label for="inputPassword3" class="col-sm-3 control-label">Remarks:</label>
											<div class="col-sm-4">
												<textarea rows="4" class="form-control"
													ng-model="taskCompletion.ttrn_performer_comments"
													name="comments" placeholder="Remarks" required></textarea>
												<div ng-messages="taskCompletionForm.comments.$error"
													ng-if="taskCompletionForm.$submitted">
													<span class="error-text" ng-message="required">Please
														enter remark.</span>
												</div>
											</div>
										</div>
									</div>


									<div class="col-md-12 "
										ng-if="frquency=='Event_Based' && showEventNotOccured==true">
										<div class="form-group row">
											<label for="inputPassword3" class="col-sm-3 control-label">Remarks:</label>
											<div class="col-sm-4">
												<textarea rows="4" class="form-control"
													ng-model="taskCompletion.ttrn_performer_comments"
													name="comments" placeholder="Remarks" required></textarea>
												<div ng-messages="taskCompletionForm.comments.$error"
													ng-if="taskCompletionForm.$submitted">
													<span class="error-text" ng-message="required">Please
														enter remark.</span>
												</div>
											</div>
										</div>
									</div>

									<div class="col-md-12"
										ng-if="status=='Delayed' || status=='Non Complied' && status!='Complied'">
										<div class="form-group row">
											<label for="inputPassword3" class="col-sm-3 control-label">Reason
												For Non-Compliance:</label>
											<div class="col-sm-4">
												<textarea rows="4" class="form-control"
													ng-model="taskCompletion.ttrn_reason_for_non_compliance"
													name="reason" placeholder="Remarks" required></textarea>
												<div ng-messages="taskCompletionForm.reason.$error"
													ng-if="taskCompletionForm.$submitted">
													<span class="error-text" ng-message="required">Please
														enter reason for non-compliance.</span>
												</div>
											</div>
										</div>
									</div>


									<div class="col-md-6"></div>

									<div id="filesContainer">
										<div class='col-md-12'>
											<div id="div0" class="form-group row">
												<span class="glyphicons glyphicons-remove-sign"></span> <label
													class="col-md-3 form-control-label">Upload Proof of
													Compliance:</label>
												<div class="col-md-3"
													ng-if="task.document==1 && showEventNotOccured == true">
													<input type="file" multiple class="btn btn-myWarning"
														id="ttrn_proof_of_compliance" valid-file
														ng-model="proofCompliance.ttrn_proof_of_compliance"
														name="ttrn_proof_of_compliance" required><br />
													<div
														ng-messages="taskCompletionForm.ttrn_proof_of_compliance.$error"
														ng-if="taskCompletionForm.$submitted">
														<span class="error-text" ng-message="required">Document
															is mandatory.</span>
													</div>
												</div>

												<div class="col-md-3" ng-if="task.document==0">
													<input type="file" multiple class="btn btn-myWarning"
														id="ttrn_proof_of_compliance"
														file-model="proofCompliance.ttrn_proof_of_compliance"
														name="ttrn_proof_of_compliance"><br />
												</div>

											</div>

										</div>

										<br>
									</div>

								</div>

							</div>

						</div>

						<div class="col-md-2"></div>
						<div class="col-md-12 litigation_buttons">
							<br>

							<center>
								<!-- <input ng-if="task.document==1" type="submit" ng-click="saveCompletion(taskCompletionForm.$valid)" class="btn btn-myPrimary" value="Submit" /> -->
								<input
									ng-if="status=='Posing Risk' || status=='Non Complied' || status=='Pending' || status=='Re_Opened' "
									type="submit"
									ng-click="saveCompletion(taskCompletionForm.$valid)"
									class="btn btn-myPrimary" value="Submit" /> <input
									ng-if=" status=='Complied' || status=='Delayed' || status=='Wating for Approval' || status=='Delayed Reported'"
									type="submit"
									ng-click="saveCompletion(taskCompletionForm.$valid)"
									class="btn btn-myPrimary" value="Update" />
								<button type="button" class="btn btn-myPrimary1"
									data-dismiss="modal">Cancel</button>
							</center>
						</div>
					</div>

					<!-- Multiple task completion -->
					<div style="clear: both"></div>
					<div class="f_form_content" ng-if="multipleTasks.length > 0 ">
						<h2>Multiple Task Completion</h2>
						<div class="row">
							<div class="col-md-12"
								style="overflow-x: scroll; margin-top: 10px;">
								<label class="control-label" for=""> <input
									type="checkbox" name="selectall" id="selectAll"
									ng-model="selectedAll" ng-change="checkAllMultipleCompletion()">
									&nbsp;&nbsp;Select All&nbsp;&nbsp;&nbsp;&nbsp;
								</label> <label class="control-label " for="">Selected Task :</label> <label
									class="control-label lblcount" for="totaltask">{{task_ttrn_ids.length}}</label>
								<label class="control-label " for=""> &nbsp;&nbsp; Total
									Task :</label> <label class="control-label lblcount" for="totaltask">
									{{multipleTasks.length}}</label>
								<table id="example" class="table table-striped table-bordered">
									<thead>
										<tr style="background: #0B6EC3; color: #fff;">
											<th>Client Task Id</th>
											<th>Vertical</th>
											<th>Unit</th>
											<th>Function</th>
											<th>Legislation</th>
											<th>Rule</th>
											<th>Reference</th>
											<th>Who</th>
											<th>When</th>
											<th>Activity</th>
											<th>Status</th>
											<th>Owner Date</th>
											<th>Legal Date</th>
											<th>Frequency</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat=" i in multipleTasks">
											<td><center>{{i.client_task_id}}</center>
												<center>
													<input type="checkbox" value="i.ttrn_id"
														ng-model="i.SelectedTaskId"
														ng-click="getCheckTaskIdMultipleCompletion(i.SelectedTaskId,i.ttrn_id)">
												</center></td>
											<td>{{i.orga_name}}</td>
											<td>{{i.loca_name}}</td>
											<td>{{i.dept_name}}</td>
											<td>{{i.legi_name}}</td>
											<td>{{i.rule_name}}</td>
											<td>{{i.ref}}</td>
											<td>{{i.who}}</td>
											<td>{{i.when}}</td>
											<td>{{i.activity}}</td>
											<td>{{i.status}}</td>
											<td>{{i.pr_date}}</td>
											<td>{{i.legal_date}}</td>
											<th>{{i.frequency_for_operation}}</th>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<!--  Multiple task completion end -->

				</div>
		</div>
		</form>
	</div>
</div>

</div>
</div>
</form>
</div>
</div>

<div id="resonForNonCompliance" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Reason For Non-Compliance</h4>
			</div>
			<form autocomplete="off" name="ReasonForNonComplianceForm"
				role="form" class="form-horizontal" novalidate>
				<div class="modal-body">
					<div class="form-group">
						<label class="control-label col-sm-5" for="email">Reason
							for Non-Compliance:</label>
						<div class="col-sm-6">
							<textarea rows="3" class="form-control"
								ng-model="nonComplianceReason.ttrn_reason_for_non_compliance"
								name="nonCompliaceReason" placeholder="Enter Reason" required></textarea>
							<div
								ng-messages="ReasonForNonComplianceForm.nonCompliaceReason.$error"
								ng-if="ReasonForNonComplianceForm.$submitted">
								<span class="error-text" ng-message="required">Please
									enter reason for Non-Compliance.</span>
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-success"
						ng-click="sendReasonForNonCompliance(ReasonForNonComplianceForm.$valid)">Submit</button>
					<!-- <button type="button" class="btn btn-danger" id="reset" name="reset">Clear</button> -->
					<input class="btn btn-danger" type="reset" id="reset" name="reset"
						value="Clear" />
				</div>
			</form>
		</div>
	</div>
</div>

<div id="reOpenTask" class="modal fade" role="dialog">
	<div class="modal-dialog">

		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Re-Open Task Comments</h4>
			</div>
			<form autocomplete="off" name="ReopenForm" role="form"
				class="form-horizontal" novalidate>
				<div class="modal-body">

					<div class="form-group">
						<label class="control-label col-sm-5" for="email">Reason
							for Re-Opening:</label>
						<div class="col-sm-6">
							<textarea rows="3" class="form-control"
								ng-model="reOpen.reopen_comment" name="comment"
								placeholder="Enter Reason" required></textarea>
							<div ng-messages="ReopenForm.comment.$error"
								ng-if="ReopenForm.$submitted">
								<span class="error-text" ng-message="required">Please
									enter reason for Re-Opening.</span>
							</div>
						</div>
					</div>



				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-success"
						ng-click="sendReOpenTask(ReopenForm.$valid)">Re-Open Task</button>
					<!-- <button type="button" class="btn btn-danger" id="reset" name="reset">Clear</button> -->
					<input class="btn btn-danger" type="reset" id="reset" name="reset"
						value="Clear" />
				</div>
			</form>
		</div>

	</div>
</div>

<!-- Edit dates  -->
<div id="editConfiguration" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content" style="width: 117%">
			<form autocomplete="off" name="configForm" class="form-horizontal"
				novalidate>
				<div class="modal-header">
					<button aria-hidden="true" data-dismiss="modal"
						class="bootbox-close-button close" type="button">×</button>
					<h4 class="modal-title">Edit Dates</h4>
				</div>
				<div class="modal-body">
					<div class="bootbox-body">
						<style>
#legalDateConfig {
	z-index: 1151 !important;
}

table tr td {
	text-align: center;
	padding: 5px;
}

table tr th {
	text-align: center;
}

table tr td input {
	text-align: center;
}

table tr td select option {
	text-align: center;
}
</style>
						<div class="row">
							<div class="col-md-12">
								<table width="100%">
									<tbody>
										<tr>
											<th>#</th>
											<th>Old Dates</th>
											<th>New Dates</th>
										</tr>
										<tr>
											<td><label>Buffer days</label></td>
											<td>
												<!-- <input type="text" class="form-control" readonly="readonly" value="NtmapObj.ttrn_prior_days_buffer"/> -->
											</td>
											<td><input type="number" ng-change="getDates()"
												name="buffer_days" class="form-control"
												ng-model="tmapObj.ttrn_prior_days_buffer" required />
												<div ng-messages="configForm.buffer_days.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Enter
														buffer days. </span>
												</div></td>
										</tr>
										<tr>
											<td><label>Legal due date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_legal_date}}" readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														ng-change="getDates()" uib-datepicker-popup="{{format}}"
														ng-model="lega_date" is-open="popup_legal.opened"
														close-text="Close" alt-input-formats="altInputFormats"
														readonly="readonly" required="true" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_legal()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.lega_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date. </span>
												</div>
												<p class="error-text">{{errMessage.lh_date}}</p>
											</td>
										</tr>
										<tr>
											<td><label>Unit head date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_unit_date}}" readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														uib-datepicker-popup="{{format}}" ng-model="unit_date"
														is-open="popup_unit.opened" readonly="" close-text="Close"
														alt-input-formats="altInputFormats" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_unit()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.unit_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date.</span>
												</div>
												<p class="error-text">{{errMessage.uh_date}}</p>

											</td>
										</tr>
										<tr>
											<td><label>Function date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_function_date}}"
															readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														uib-datepicker-popup="{{format}}" ng-model="func_date"
														is-open="popup_func.opened" readonly="" close-text="Close"
														alt-input-formats="altInputFormats" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_func()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.func_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date.</span>
												</div>
												<p class="error-text">{{errMessage.fh_date}}</p>

											</td>
										</tr>
										<tr>
											<td><label>Approver date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_evaluator_date}}"
															readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														uib-datepicker-popup="{{format}}" ng-model="eval_date"
														is-open="popup_eval.opened" readonly="" close-text="Close"
														alt-input-formats="altInputFormats" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_eval()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.rw_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date.</span>
												</div>
												<p class="error-text">{{errMessage.rw_date}}</p>
											</td>
										</tr>
										<tr>
											<td><label>Owner date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_executor_date}}"
															readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														uib-datepicker-popup="{{format}}" ng-model="exec_date"
														is-open="popup_exec.opened" readonly="" close-text="Close"
														alt-input-formats="altInputFormats" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_exec()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.pr_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date.</span>
												</div>
												<p class="error-text">{{errMessage.pr_date}}</p>

											</td>

										</tr>
										<tr>
											<td style="Display: none;"><input type="text"
												class="form-control" name="validate_dates"
												ng-model="tmapObj.validate_dates" />
												<div ng-messages="configForm.validate_dates.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Check
														Date validation.</span>
												</div></td>

											<td style="text-align: center;"><input type="submit"
												ng-click="updateDates(configForm.$valid);"
												value="Update Dates" name="config" class="btn btn-success"></td>
											<td></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>


</div>

<!-- SUB TASK -->
<div id="SubTaskCompletion" class="modal fade" role="dialog">
	<div class="modal-dialog" style="width: 800px;">
		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Complete Sub Task</h4>
			</div>

			<div id="subTaskCompletionLoader" class="modal fade" role="dialog"
				style="margin-left: 70px; margin-top: 200px;">
				<img src="./images/Loader/taskCompletionLoaderG.gif" width="90px"
					height="90px" />

				<!-- <h6>Please Wait....</h6> -->
			</div>
			<form autocomplete="off" name="SubTaskCompletionForm" role="form"
				class="form-horizontal" novalidate>
				<div class="modal-body-drilled"
					style="width: 782px; overflow-x: auto;">
					<div class="f_form_content">
						<h2>Complete Sub Task</h2>
						<div class="col-md-2"></div>
						<div class="col-md-10">

							<div id="restOfTheControls">

								<div class="col-md-12">
									<div class="form-group">
										<label class="control-label col-sm-5">Completed Date :</label>
										<div class="col-sm-7">
											<p class="input-group" style="width: 300px;">
												<input type="text" class="form-control"
													name="scau_notice_date" uib-datepicker-popup="{{format}}"
													ng-model="subTaskCompletion.ttrn_completed_date"
													is-open="popup_completed_date.opened" close-text="Close"
													alt-input-formats="altInputFormats" readonly="readonly"
													required="true" /> <span class="input-group-btn">
													<button type="button" class="btn btn-default"
														ng-click="subtaskcompetedDate()">
														<i class="glyphicon glyphicon-calendar"></i>
													</button>
												</span>
											<p class="error-text">{{errMessage.completed_date}}</p>
											</p>

										</div>
									</div>
								</div>

								<div class="col-md-12">
									<div class="form-group row">
										<label class="control-label col-sm-5" for="email">Comments
											:</label>
										<div class="col-sm-6">
											<textarea rows="4" class="form-control"
												ng-model="subTaskCompletion.ttrn_performer_comments"
												name="comment" placeholder="Enter Comments" required></textarea>
											<div ng-messages="SubTaskCompletionForm.comment.$error"
												ng-if="SubTaskCompletionForm.$submitted">
												<span class="error-text" ng-message="required">Please
													enter comments.</span>
											</div>
										</div>
									</div>
								</div>


								<div class="col-md-12 ">
									<div class="form-group row"
										ng-if="ttrn_task_status=='Non Complied'">
										<label class="control-label col-sm-5" for="email">Reason
											for Non-Compliance :</label>
										<div class="col-sm-6">
											<textarea rows="3" class="form-control"
												ng-model="subTaskCompletion.ttrn_reason_for_non_compliance"
												name="ttrn_reason_for_non_compliance"
												placeholder="Enter Reason" required></textarea>
											<div
												ng-messages="SubTaskCompletionForm.ttrn_reason_for_non_compliance.$error"
												ng-if="SubTaskCompletionForm.$submitted">
												<span class="error-text" ng-message="required">Please
													enter reason for non-compliance.</span>
											</div>
										</div>
									</div>
								</div>

								<div class="col-md-6"></div>

								<div id="filesContainer">
									<div class='col-md-12'>
										<div id="div0" class="form-group row">
											<span class="glyphicons glyphicons-remove-sign"></span> <label
												class="col-md-5 form-control-label">Upload Proof of
												Compliance :</label>
											<div class="col-sm-6" ng-if="ttrn_document==1">
												<input type="file" multiple class="btn btn-myWarning"
													id="ttrn_proof_of_compliance" valid-file
													ng-model="proofCompliance.ttrn_proof_of_compliance"
													name="ttrn_proof_of_compliance" required><br />
												<div
													ng-messages="SubTaskCompletionForm.ttrn_proof_of_compliance.$error"
													ng-if="SubTaskCompletionForm.$submitted">
													<span class="error-text" ng-message="required">Document
														is mandatory.</span>
												</div>
											</div>

											<div class="col-md-3" ng-if="ttrn_document==0">
												<input type="file" multiple class="btn btn-myWarning"
													id="ttrn_proof_of_compliance"
													file-model="proofCompliance.ttrn_proof_of_compliance"
													name="ttrn_proof_of_compliance"><br />
											</div>

										</div>

									</div>

									<br>
								</div>


							</div>

						</div>

					</div>

					<div class="col-md-2"></div>
					<div class="col-md-12 litigation_buttons">
						<br>

						<center>
							<!-- <input ng-if="task.document==1" type="submit" ng-click="saveCompletion(taskCompletionForm.$valid)" class="btn btn-myPrimary" value="Submit" /> -->
							<input type="submit"
								ng-click="saveSubTaskCompletion(SubTaskCompletionForm.$valid)"
								class="btn btn-myPrimary" value="Complete SubTask" />
							<button type="button" class="btn btn-myPrimary1"
								data-dismiss="modal">Cancel</button>
						</center>


					</div>
				</div>
		</div>
	</div>
	</form>
</div>
</div>

<!-- Reopen Subtask  -->
<div id="reOpenSubTask" class="modal fade" role="dialog">
	<div class="modal-dialog">

		<!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Re-Open Task Comments</h4>
			</div>
			<form autocomplete="off" name="ReopenForm" role="form"
				class="form-horizontal" novalidate>
				<div class="modal-body">

					<div class="form-group">
						<label class="control-label col-sm-5" for="email">Reason
							for Re-Opening:</label>
						<div class="col-sm-6">
							<textarea rows="3" class="form-control"
								ng-model="reOpen.reopen_task_comment" name="comment"
								placeholder="Enter Reason" required></textarea>
							<div ng-messages="ReopenForm.comment.$error"
								ng-if="ReopenForm.$submitted">
								<span class="error-text" ng-message="required">Please
									enter reason for Re-Opening.</span>
							</div>
						</div>
					</div>



				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-success"
						ng-click="sendReOpenSubTask(ReopenForm.$valid)">Re-Open
						Task</button>
					<!-- <button type="button" class="btn btn-danger" id="reset" name="reset">Clear</button> -->
					<input class="btn btn-danger" type="reset" id="reset" name="reset"
						value="Clear" />
				</div>
			</form>
		</div>

	</div>
</div>

<!-- Edit Sub Task Dates  -->

<div id="editSubTaskConfiguration" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content" style="width: 117%">
			<form autocomplete="off" name="configForm" class="form-horizontal"
				novalidate>
				<div class="modal-header">
					<button aria-hidden="true" data-dismiss="modal"
						class="bootbox-close-button close" type="button">×</button>
					<h4 class="modal-title">Edit Dates</h4>
				</div>
				<div class="modal-body">
					<div class="bootbox-body">
						<style>
#legalDateConfig {
	z-index: 1151 !important;
}

table tr td {
	text-align: center;
	padding: 5px;
}

table tr th {
	text-align: center;
}

table tr td input {
	text-align: center;
}

table tr td select option {
	text-align: center;
}
</style>
						<div class="row">
							<div class="col-md-12">
								<table width="100%">
									<tbody>
										<tr>
											<th>#</th>
											<th>Old Dates</th>
											<th>New Dates</th>
										</tr>
										<tr>
											<td><label>Buffer days</label></td>
											<td>
												<!-- <input type="text" class="form-control" readonly="readonly" value="NtmapObj.ttrn_prior_days_buffer"/> -->
											</td>
											<td><input type="number" ng-change="getDates()"
												name="buffer_days" class="form-control"
												ng-model="tmapObj.ttrn_prior_days_buffer" required />
												<div ng-messages="configForm.buffer_days.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Enter
														buffer days. </span>
												</div></td>
										</tr>
										<tr>
											<td><label>Legal due date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_legal_date}}" readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														ng-change="getDates()" uib-datepicker-popup="{{format}}"
														ng-model="lega_date" is-open="popup_legal.opened"
														close-text="Close" alt-input-formats="altInputFormats"
														readonly="readonly" required="true" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_legal()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.lega_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date. </span>
												</div>
												<p class="error-text">{{errMessage.lh_date}}</p>
											</td>
										</tr>
										<tr>
											<td><label>Unit head date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_unit_date}}" readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														uib-datepicker-popup="{{format}}" ng-model="unit_date"
														is-open="popup_unit.opened" readonly="" close-text="Close"
														alt-input-formats="altInputFormats" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_unit()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.unit_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date.</span>
												</div>
												<p class="error-text">{{errMessage.uh_date}}</p>

											</td>
										</tr>
										<tr>
											<td><label>Function date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_function_date}}"
															readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														uib-datepicker-popup="{{format}}" ng-model="func_date"
														is-open="popup_func.opened" readonly="" close-text="Close"
														alt-input-formats="altInputFormats" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_func()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.func_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date.</span>
												</div>
												<p class="error-text">{{errMessage.fh_date}}</p>

											</td>
										</tr>
										<tr>
											<td><label>Approver date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_evaluator_date}}"
															readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														uib-datepicker-popup="{{format}}" ng-model="eval_date"
														is-open="popup_eval.opened" readonly="" close-text="Close"
														alt-input-formats="altInputFormats" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_eval()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.rw_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date.</span>
												</div>
												<p class="error-text">{{errMessage.rw_date}}</p>
											</td>
										</tr>
										<tr>
											<td><label>Owner date</label></td>
											<td>
												<div class="form-group">
													<div class="col-sm-12">
														<input type="text" class="form-control"
															value="{{NtmapObj.ttrn_executor_date}}"
															readonly="readonly">
													</div>
												</div>

											</td>
											<td>
												<p class="input-group" style="width: 172px;">
													<input type="text" class="form-control"
														uib-datepicker-popup="{{format}}" ng-model="exec_date"
														is-open="popup_exec.opened" readonly="" close-text="Close"
														alt-input-formats="altInputFormats" /> <span
														class="input-group-btn">
														<button type="button" class="btn btn-default"
															ng-click="open_exec()">
															<i class="glyphicon glyphicon-calendar"></i>
														</button>
													</span>
												</p>
												<div ng-messages="configForm.pr_date.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Select
														date.</span>
												</div>
												<p class="error-text">{{errMessage.pr_date}}</p>

											</td>

										</tr>
										<tr>
											<td style="Display: none;"><input type="text"
												class="form-control" name="validate_dates"
												ng-model="tmapObj.validate_dates" />
												<div ng-messages="configForm.validate_dates.$error"
													ng-if="configForm.$submitted">
													<span class="error-text" ng-message="required">Check
														Date validation.</span>
												</div></td>

											<td style="text-align: center;"><input type="submit"
												ng-click="updateSubTaskDates(configForm.$valid);"
												value="Update Dates" name="config" class="btn btn-success"></td>
											<td></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>


<script type="text/javascript">
	
</script>