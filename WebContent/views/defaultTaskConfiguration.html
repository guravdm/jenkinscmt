<!--     <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular-sanitize.js"></script>
 -->
<div class="page_cont_padd">
	<div class="page_container">
		<!--heading text-->

		<div class="col-md-12">
			<div class="header_button">
				<!--<button type="button" class="btn btn-primary" id="wdt_re">Litigation Summary</button>-->
				<h2 style="color: #032BEC; font-size: 24px; float: left;">Default Task	Configuration</h2>
				<!-- <a ng-click="backToPreviousState()"><img
					src="images/DashboardIcons/backold.png" class="backButton"
					width="100px;"></a> -->
				<site-header Back="" forward="forward"></site-header>
			</div>
		</div>
		<div style="clear: both"></div>

		<!-- Filters -->
		<form class="form-horizontal" name="taskSearchForm" role="form" novalidate>
			<div class="f_form_content">
				<h2>Search</h2>
				<div class="col-md-12">
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Country : </label>
							<div class="col-sm-8">
							<select class="form-control" name="country_id" ng-model="searchObj.country_id" ng-options="c.country_id as c.country_name for c in countriesList"  ng-change="getList();" required>
									<option value="">--Select--</option>
							</select><i class="asterisk_input"></i>
							<div ng-messages="taskSearchForm.country_id.$error" ng-if="taskSearchForm.$submitted">
								  <span class="error-text" ng-message="required">Select Country.</span>
							</div>
							</div>
						</div>
						</div>
						<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Choose :</label>
							<div class="col-md-6">
								<label class="radio-inline"> <input type="radio"
									id="state" name="state" value="states"  ng-model="searchObj.ChooseSOrC" ng-change="getList()">States
								</label> <label class="radio-inline"> <input type="radio" id="central" name="state" value="central" ng-model="searchObj.ChooseSOrC" ng-change="getList();">Central
								</label>
							</div>
						</div>
						
						</div>
						<div class="col-md-4">
						<div class="form-group" id="stateBody" ng-if="searchObj.ChooseSOrC =='states'">
							<label class="control-label col-sm-4" for="sel1">State :</label>
							<div class="col-sm-8">
								<select class="form-control" name="state_id" ng-model="searchObj.state_id" ng-options="s.state_id as s.state_name for s in stateList" ng-change="getCategoryOfLawList();getalllegiList()">
									<option value="">--Select--</option>
								</select>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Category
								of Law :</label>
							<div class="col-sm-8">
								<select class="form-control" name="cat_id" ng-model="searchObj.cat_id" ng-options="c.cat_law_id as c.cat_law_name for c in categoryOfLawList" ng-change= "getalllegiList()">
									<option value="">--Select--</option>
								</select>
							</div>
						</div>
						</div>
						<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Frequency:</label>
							<div class="col-sm-8">
								<select class="form-control" id="tmap_frequency"  ng-model="searchObj.frequency">
									<option value="NA">-- Select Frequency --</option>
									<option value="Event_Based">Event based</option>
								</select>
							</div>
						</div>
					</div>
					<!-- <div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Product (Optional)
								:</label>
							<div class="col-sm-8">
								<select class="form-control" id="products">
									<option value="0">--Select--</option>
								</select>
							</div>
						</div>						
					</div> -->
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Vertical:</label>
							<div class="col-sm-8">
								<select class="form-control" name="tmap_orga_id" ng-model="configObj.tmap_orga_id" ng-options="e.orga_id as e.orga_name for e in entityListt" ng-change="getEntityDependentArrayy()"  >
									<option value="">--Select--</option>
									</select>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Unit :</label>
							<div class="col-sm-8">
								<select class="form-control" name="tmap_loca_id" ng-model="configObj.tmap_loca_id" ng-options="u.loca_id as u.loca_name for u in unitListt | orderBy:'loca_name'" ng-change="getUnitDependentArrayy()" >
									<option value="">--Select--</option>
									</select>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Function:</label>
							<div class="col-sm-8">
								<select class="form-control" name="tmap_dept_id" ng-model="configObj.tmap_dept_id" ng-options="f.dept_id as f.dept_name for f in functionListt" ng-change="getFunctionDependentArrayy()" >
									<option value="">--Select--</option>
									</select>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Owner:</label>
							<div class="col-sm-8">
								<select class="form-control" name="tmap_pr_user_id" ng-model="configObj.tmap_pr_user_id" ng-options="ex.user_id as ex.user_name for ex in executorListt" >
									<option value="">--Select--</option>
									</select>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Approver:</label>
							<div class="col-sm-8">
								<select class="form-control" name="tmap_rw_user_id" ng-model="configObj.tmap_rw_user_id" ng-options="ev.user_id as ev.user_name for ev in evaluatorListt" >
									<option value="">--Select--</option>
									</select>
							</div>
						</div>
					</div>
		           <div class="col-md-8">
					<div class="form-group">
							<label class="control-label col-sm-2" for="sel1">Legislation :</label>
							<div class="col-sm-10">
								<ui-select ng-model="legiList.selected" theme="bootstrap"  style="max-width: 545px;" ng-change="getalllegiRuleList()">
							    <ui-select-match   placeholder="Select legislation">
							    {{$select.selected.legi_name}}
							    <button class="clear" ng-click="clearLegiList($event)">X</button>
							    </ui-select-match>
							    <ui-select-choices repeat="legiList in alllegiList  track by $index | propsFilter: {legi_name: $select.search}">
							      <div ng-bind-html="legiList.legi_name | highlight: $select.search"></div>
							    <!--   {{legiList.legi_name}} -->
							    </ui-select-choices>
							  </ui-select>
							</div>
						</div> 	
						</div>
						
						<div class="col-md-8">
						<div class="form-group">
							<label class="control-label col-sm-2" for="sel1">Rules :</label>
							<div class="col-sm-10">
								<ui-select ng-model="legiRuleL.selected" theme="bootstrap"  style="max-width: 545px;"  remove-selected="false">
							    <ui-select-match  placeholder="Select rules">
							    <button class="clear" ng-click="clearLegiRuleL($event)">X</button>
							    {{$select.selected.rule_name}}
							    </ui-select-match>
							    <ui-select-choices repeat="legiRuleL in legiRuleList  track by $index | propsFilter: {rule_name: $select.search}">
							     
							      <div ng-bind-html="legiRuleL.rule_name | highlight: $select.search"></div>
							      <!-- ////{{legiRuleL.rule_name}} -->
							    </ui-select-choices>
							  </ui-select><br/>
							  
							</div>
						</div>
					</div>
					<div class="col-md-11">
						  <div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Event
								:</label>
							<div class="col-sm-8">
								<select class="form-control"  ng-model="searchObj.event"  >
									<option value="">--Select--</option>
									<option value="NA">NA</option>
									</select>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Sub Event
								:</label>
							<div class="col-sm-8">
								<select class="form-control"  ng-model="searchObj.sub_event"  >
									<option value="">--Select--</option>
									<option value="NA">NA</option>
									</select>
							</div>
						</div>
					</div>
					
					</div>	
							
				 
                  
				</div>
				<!-- <div class="col-md-12">
				   <div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Product
								Name:</label>
							<div class="col-md-8">
								<input id="product_name" type="text" class="form-control" />
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="form-group">
							<label class="control-label col-sm-4" for="sel1">Protocol
								No:</label>
							<div class="col-md-8">
								<input id="protocol_no" type="text" class="form-control" />
							</div>
						</div>
					</div>
				</div> -->
			<center>
				<br />(<strong>Note :</strong> If Rule is not
								available then Select <strong>'NA'</strong> Option)	</center>
				<div class="col-md-12 litigation_buttons">
					<br>
					<center>
						<input type="submit" ng-click="getTaskList(taskSearchForm.$valid)" value="Search" class="btn btn-myPrimary btn-save"/>

					</center>
				</div>
				
			</div>
		</form>
		<!-- End Filters -->
		
     <form name="configForm" autocomplete="off" novalidate>
		<div class="f_form_content">
			<h2>Settings</h2>
			<div class="col-md-12">
					<div class="col-md-12">
						<div class="col-md-4">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Frequency:</label>
								<div class="col-md-8" id="default_frequency">
									<input  type="text" id="dtco_default_frequency" class="form-control" value="Event_Based"  readonly="true" />
								</div>
							</div>
						</div>
						<div class="col-md-4" id="default_type">
							<div class="form-group">
								<label class="control-label col-sm-4" for="sel1">Type:</label>
								<div class="col-md-8">
									<select name="type"  id="dtco_after_before" class="form-control" ng-model="tmapObj.dtco_after_before" ng-options="t.id as t.name for t in after_before" required>
										<option value="">--Select--</option>
										
									</select>
									<div ng-messages="configForm.type.$error" ng-if="configForm.$submitted">
								  <span class="error-text" ng-message="required">Please Select Type.</span>
							</div>
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<input type="hidden"  id="dtco_sub_event" class="form-control"/>
							<input type="hidden"  id="dtco_event"  class="form-control" />
						</div>    

					</div>


				</div>
		</div>

		<!-- Second Form -->
		<div class="row" id="days_confi" ng-if="tmapObj.dtco_after_before!='Same'">
			<div class="col-md-10" style="width: 1230px;">
					<table id="example3" class="table table-striped table-bordered"
						width="90%" cellspacing="0">
						<tr style="background: #0B6EC3; color: #fff;">
							<th>#</th>
							<th>Buffer Days</th>
							<th>Legal Days</th>
							<th>Unit Head Days</th>
							<th>Function Head Days</th>
							<th>Approver Days</th>
							<th>Owner Days</th>
							<!-- <th>Alert Prior Days (Day)</th> -->
						</tr>
						<tbody>
							<tr>
								<td><strong>1)</strong></td>
								<td>
									<div class="form-group">
										<div class="col-sm-12">
											<input class="form-control" name="prior_Days"  ng-change="getDays();validateDays();" ng-model="tmapObj.ttrn_prior_days_buffer" type="text">
										</div>
										
									</div>
								</td>
								<td>
									<div class="form-group">
										<div class="col-sm-12">
											<input class="form-control" name="legal_days" ng-change="getDays();validateDays();" ng-model="tmapObj.dtco_legal_days" type="text">
										</div>
										<div ng-messages="configForm.legal_days.$error" ng-if="configForm.$submitted">
								         <!--  <span class="error-text" ng-message="required">Select date. </span> --> 
							            </div> 
							            <p class="error-text">{{errMessage.lh_date}}</p>
									</div>
								</td>
								<td>
									<div class="form-group">
										<div class="col-sm-12">
											<input class="form-control" name="unithead_days"  ng-model="tmapObj.dtco_uh_days" type="text">
										</div>
										<div ng-messages="configForm.unithead_days.$error" ng-if="configForm.$submitted">
								          <span class="error-text" ng-message="required">Select date. </span> 
							            </div> 
							            <p class="error-text">{{errMessage.uh_date}}</p>
									</div>
								</td>
								<td>
									<div class="form-group">
										<div class="col-sm-12">
											<input class="form-control" name="functionhead_days"  ng-model="tmapObj.dtco_fh_days" type="text">
										</div>
										<div ng-messages="configForm.functionhead_days.$error" ng-if="configForm.$submitted">
								          <span class="error-text" ng-message="required">Select date. </span> 
							            </div> 
							            <p class="error-text">{{errMessage.fh_date}}</p>
									</div>
								</td>
								<td>
									<div class="form-group">
										<div class="col-sm-12">
											<input class="form-control" name="evaluator_days"  ng-model="tmapObj.dtco_rw_days" type="text">
										</div>
										<div ng-messages="configForm.evaluator_days.$error" ng-if="configForm.$submitted">
								          <!-- <span class="error-text" ng-message="required">Select date. </span>  -->
							            </div> 
							            <p class="error-text">{{errMessage.rw_date}}</p>
									</div>
								</td>
								<td>
									<div class="form-group">
										<div class="col-sm-12">
											<input class="form-control" name="executor_days"  ng-model="tmapObj.dtco_pr_days" type="text">
										</div>
										<div ng-messages="configForm.executor_days.$error" ng-if="configForm.$submitted">
								         <!--  <span class="error-text" ng-message="required">Select date. </span>  -->
							            </div> 
							            <p class="error-text">{{errMessage.pr_date}}</p>
									</div>
								</td>
								
							</tr>
						</tbody>
					</table>
					
			</div>
		</div>
		<table ng-if="tmapObj.tasks_list.length>0" class="table table-striped table-bordered" width="90%" id="tbl_conf"	cellspacing="0">
						<tr>
							<td colspan="8" style="text-align: right;">
								<div class="col-md-12 litigation_buttons divSubmit" >
									<br> <input type="submit"  class="btn btn-myPrimary" ng-click ="saveConfiguration(configForm.$valid);" value="Save Configuration">
								</div>
							</td>
						</tr>
					</table>
  
 </form>
			<div class="row">
				<!-- <h3 style="border-bottom: 1px solid #ccc; padding: 10px;">Sort
					By</h3> -->
				<div class="form-group">
					<!-- <div class="col-sm-3">
						<div class="col-sm-12">
							<select id="activatedFiltrs" name="activatedFiltrs"
								class="form-control" onchange="getTasksForConfig()">
								<option value="0">-- Select --</option>
								<option value="all" select="selected">All</option>
								<option value="activated">Activated</option>
								<option value="deactivated">Deactivated</option>
							</select>
						</div>
					</div> -->
					<div class="col-sm-6">
						<div class="col-sm-12">
							<div class="col-sm-4">
								<label class="control-label" for=""> <input type="checkbox" name="selectall" id="selectAll" ng-model="selectedAll" ng-click="checkAll()">Select
							All
						</label>
							</div>
							<!-- 							<input type="button" class="btn btn-warning" name="SaveWithoutConfig" value="Save Without Configuration" /> -->
							<div class="col-sm-4">
								
							<label class="control-label " for="">Total Task : {{taskList.length}}</label> <label
								class="control-label lblcount" for="totaltask"></label>
						
							</div>
							<div class="col-sm-4">
								<label class="control-label" for="">Selected Task : {{tmapObj.tasks_list.length}}</label> <label
								class="control-label lblcount" for="selectedtask"></label>
							</div>
						</div>

					</div>
					<div style="clear: both;" ></div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<table id="example" class="table table-striped table-bordered "	width="99%" cellspacing="0">
						<thead id="task_table_body">
							<tr style="background: #0B6EC3; color: #fff;">
								<th><span style="text-align: center;">Client Task Id</span></th>
								<th>Lexcare Task Id</th>
								<th>Name Of Legislation</th>
								<th>Rule</th>
								<th>Reference</th>
								<th>Who</th>
								<th>When</th>
								<th>Activity</th>
								<!-- <th>Procedure</th> -->
								<th>Frequency</th>
								<th>Impact</th>
								<th>Unit Impact</th>
								<th>Vertical Impact</th>
								<!-- <th>Due Date</th> -->
							</tr>
						</thead>
						<tbody id="tbody">
							 <tr ng-repeat="list in taskList" ng-if="taskList.length>0">
							 	<td><center><input type="checkbox" value="list.task_id" ng-model="list.SelectedTaskId" ng-click="getCheckTaskId(list.SelectedTaskId,list.tmap_client_task_id)" ></center> {{list.tmap_client_task_id}}</td>
								<td>{{list.task_lexcare_id}}</td>
								<td>{{list.task_legi_name}}</td>
								<td>{{list.task_rule_name}}</td>
								<td>{{list.task_reference}}</td>
								<td>{{list.task_activity_who}}</td>
								<td>{{list.task_activity_when}}</td>
								<td>{{list.task_activity}}</td>
								<td>{{list.task_frequency_for_operation}}</td>
								<td>{{list.task_impact}}</td>
								<td>{{list.task_impact_on_unit}}</td>
								<td>{{list.task_impact_on_orga}}</td>
							
							</tr>
						</tbody>
					</table>
				</div>
			</div>
	 
	</div>
	<div style="clear: both"></div>
	
</div>